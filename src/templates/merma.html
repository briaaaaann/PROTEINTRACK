<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Merma - ProteinTrack</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="main-container">
        
        <div class="btn-back-container">
            <a href="/" class="btn-link">
                <i class="fas fa-arrow-left"></i> Volver al Menú
            </a>
        </div>

        <div class="form-card" style="border-top: 5px solid #c0392b;"> <div class="header-section" style="margin-bottom: 30px;">
                <h1 style="font-size: 1.8rem; color: #c0392b;">
                    <i class="fas fa-trash-alt"></i> Registrar Merma
                </h1>
                <p style="font-size: 0.9rem;">Reporta desperdicios o pérdidas de inventario</p>
            </div>

            <div class="form-group">
                <label for="fecha-input">Fecha de Merma:</label>
                <input type="date" id="fecha-input" class="form-control">
            </div>

            <div class="form-group">
                <label for="producto-buscador">Producto:</label>
                
                <div class="buscador-container">
                    <input type="text" 
                        id="producto-buscador" 
                        class="form-control" 
                        placeholder="Escribe para buscar..." 
                        autocomplete="off">
                    
                    <div id="lista-resultados" class="resultados-lista"></div>
                </div>

                <input type="hidden" id="producto-id-hidden">
                
                <small style="color: #7f8c8d; font-size: 0.8em; margin-top: 5px; display: block;">
                    * Escribe el nombre y selecciona de la lista.
                </small>
            </div>

            <div class="form-group">
                <label for="unidad-select">Unidad de Medida:</label>
                <select id="unidad-select" class="form-control">
                    <option value="">Cargando unidades...</option>
                </select>
            </div>

            <div class="form-group">
                <label for="cantidad-input">Cantidad Desperdiciada:</label>
                <input type="number" id="cantidad-input" class="form-control" placeholder="0.00" step="0.01">
            </div>

            <div class="form-group">
                <label for="obs-input">Observaciones (Causa):</label>
                <input type="text" id="obs-input" class="form-control" placeholder="Ej. Se quemó, Caducidad, Caída...">
            </div>

            <button id="guardar-btn" class="btn btn-danger">
                <i class="fas fa-exclamation-circle"></i> Registrar Pérdida
            </button>

            <div id="mensaje" class="alert"></div>

        </div>
    </div>

    <script src="{{ url_for('static', filename='js/merma.js') }}"></script>
    
</body>
</html>